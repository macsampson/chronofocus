<!DOCTYPE html>
<html>
  <head>
    <title>ChronoFocus</title>
    <meta charset="UTF-8" />
    <link
      rel="stylesheet"
      href="style.css"
    />
  </head>
  <body>
    <div id="app">
      <!-- Hub Town Dashboard -->
      <div
        id="hub-town-screen"
        class="screen"
      >
        <!-- Top Section: User Profile Snapshot -->
        <div class="hub-header">
          <div class="user-profile">
            <div class="user-avatar">
              <div
                class="avatar-placeholder"
                id="user-avatar"
              >
                ‚öîÔ∏è
              </div>
            </div>
            <div class="user-info">
              <h3 id="username">Focus Warrior</h3>
              <div class="xp-section">
                <div class="xp-bar-container">
                  <div
                    class="xp-bar"
                    id="xp-bar"
                    style="width: 0%"
                  >
                    <span id="xp-text">0 / 500 XP</span>
                  </div>
                </div>
                <div
                  class="level-badge"
                  id="level-badge"
                >
                  Level 1
                </div>
              </div>
            </div>
          </div>

          <div class="stats-summary">
            <div class="stat-item">
              <div
                class="stat-value"
                id="total-pomodoros"
              >
                0
              </div>
              <div class="stat-label">Total Pomodoros</div>
            </div>
            <div class="stat-item">
              <div
                class="stat-value streak"
                id="current-streak"
              >
                üí§ 0
              </div>
              <div class="stat-label">Day Streak</div>
            </div>
          </div>
        </div>

        <!-- Middle Section: Monster Selection -->
        <div class="monster-selection-section">
          <h2>Choose Your Distraction to Battle</h2>
          <div
            id="monster-cards-container"
            class="monster-grid"
          >
            <!-- Monster cards will be injected here -->
          </div>
          <button
            id="start-session-btn"
            class="battle-button"
            disabled
          >
            ‚ñ∂ Start Focus Battle
          </button>
        </div>

        <!-- Bottom Section: Session Stats -->
        <div class="session-stats">
          <h3>Today's Focus Summary</h3>
          <div class="today-stats">
            <div class="today-stat">
              <span class="stat-label">Today's Pomodoros:</span>
              <span
                class="stat-value"
                id="today-pomodoros"
                >0</span
              >
            </div>
            <div class="today-stat">
              <span class="stat-label">Most Defeated:</span>
              <span
                class="stat-value"
                id="most-defeated-monster"
                >None</span
              >
            </div>
          </div>
          <div class="streak-log">
            <span class="stat-label">Last 5 sessions:</span>
            <div
              class="streak-indicators"
              id="streak-indicators"
            >
              <!-- Session history will be populated by JavaScript -->
            </div>
          </div>
        </div>
      </div>

      <!-- Battle Screen -->
      <div
        id="battle-screen"
        class="screen"
      >
        <h2 id="battle-monster-name">Battling...</h2>
        <div
          class="timer"
          id="timer-display"
        >
          25:00
        </div>
        <div>Monster HP:</div>
        <div class="hp-bar-container">
          <div
            class="hp-bar"
            id="monster-hp-bar"
            style="width: 100%"
          >
            100/100
          </div>
        </div>
        <img
          id="battle-monster-icon"
          src=""
          alt="Monster Icon"
          class="monster-icon"
          style="margin: 10px auto; display: block"
        />
        <h3>Battle Log</h3>
        <div
          class="battle-log"
          id="battle-log-content"
        >
          <!-- Log messages will appear here -->
        </div>
        <button id="end-session-early-btn">End Session Early</button>
      </div>

      <!-- Result Screen -->
      <div
        id="result-screen"
        class="screen"
      >
        <h2 id="result-message">Outcome</h2>
        <div
          class="xp-earned"
          id="xp-earned-display"
        >
          XP Earned: 0
        </div>
        <div
          class="stats-display"
          id="stats-display-content"
        >
          <!-- Stats like total pomodoros, streak will show here -->
        </div>
        <button id="start-another-session-btn">Start Another Session</button>
      </div>
      <!-- Confirmation Modal for Ending Session Early -->
      <div
        id="end-session-modal"
        class="modal"
        style="display: none"
      >
        <div class="modal-content">
          <h2>‚ùó End Session Early?</h2>
          <p>
            Leaving early means you won't defeat the monster and won't earn any
            XP.<br />Are you sure you want to stop now?
          </p>
          <div class="modal-buttons">
            <button id="cancel-end-session-btn">Cancel</button>
            <button
              id="confirm-end-session-btn"
              class="danger"
            >
              Yes, End Session
            </button>
          </div>
        </div>
      </div>
    </div>
    <script src="popup.js"></script>
  </body>
</html>
